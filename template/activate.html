{% extends 'layouts/base.html' %}

{% block header %}
{% if is_activated %}
<meta http-equiv="refresh" content="10; url=/account/login/" />
{% endif %}
{% endblock %}

{% block body %}
{% if is_activated %}
<div>
    激活成功, 10秒后跳转至登录页面<br/>
    <a href="/account/login/">立即跳转</a>
</div>
{% else %}
<div>
    激活邮件已发到{{ email }}邮箱,<br/>
    请登录邮箱完成激活。<br/>
    没收到验证邮件?<br/>
    1. 尝试到广告邮件、垃圾邮件目录里找找看<br/>
    2. 邮箱未收到激活邮件，请再次<a href="javascript:void(0);" onclick="activate()">发送激活邮件</a><br/>
    <hr/>
    <a href="/account/login/">激活完成,立即登录</a>
</div>
{% endif %}
{% endblock %}

{% if not is_activated %}
{% block script %}
<script type="text/javascript">
    function activate() {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST","/account/activate/",true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded")
        xmlhttp.send("email={{ email }}&csrfmiddlewaretoken={{ csrf_token }}");
    }
    window.onload=function(){
        activate()
    }
</script>
{% endblock %}
{% endif %}
